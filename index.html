<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sam Jarvis's Work Sample/title>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400&family=JetBrains+Mono:wght@0,400;0,500&display=swap" rel="stylesheet">
<style>
  :root {
    --ink: #1a1a2e;
    --ink-light: #4a4a5e;
    --ink-muted: #8888a0;
    --surface: #fafaf8;
    --surface-warm: #f5f3ee;
    --accent: #006aff;
    --accent-light: #e8f0ff;
    --accent-dark: #0050cc;
    --green: #0a8754;
    --green-light: #e6f5ee;
    --amber: #c87000;
    --amber-light: #fff5e6;
    --red: #c53030;
    --red-light: #fee;
    --border: #e2e0dc;
    --radius: 8px;
  }
  .highlight {
  background: #00b386;   /* Square-style green */
  color: white;
  padding: 3px 8px;
  border-radius: 6px;
  font-weight: 600;
}

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'DM Sans', -apple-system, sans-serif;
    color: var(--ink);
    background: var(--surface);
    line-height: 1.65;
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
  }

  .hero {
    background: var(--ink);
    color: white;
    padding: 80px 40px 60px;
    position: relative;
    overflow: hidden;
  }
  .hero::after {
    content: '';
    position: absolute;
    top: -50%;
    right: -20%;
    width: 600px;
    height: 600px;
    background: radial-gradient(circle, rgba(0,106,255,0.15) 0%, transparent 70%);
    pointer-events: none;
  }
  .hero-inner {
    max-width: 820px;
    margin: 0 auto;
    position: relative;
    z-index: 1;
  }
  .hero-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: rgba(255,255,255,0.5);
    margin-bottom: 20px;
  }
  .hero h1 {
    font-family: 'DM Serif Display', serif;
    font-size: clamp(32px, 5vw, 48px);
    font-weight: 400;
    line-height: 1.2;
    margin-bottom: 16px;
  }
  .hero h1 em { font-style: italic; color: #7fb3ff; }
  .hero-subtitle {
    font-size: 18px;
    color: rgba(255,255,255,0.65);
    max-width: 620px;
    line-height: 1.6;
  }
  .hero-meta {
    display: flex;
    gap: 32px;
    margin-top: 32px;
    font-size: 14px;
    color: rgba(255,255,255,0.45);
    font-family: 'JetBrains Mono', monospace;
  }

  .toc {
    background: white;
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 0;
    z-index: 100;
    padding: 0 40px;
  }
  .toc-inner {
    max-width: 820px;
    margin: 0 auto;
    display: flex;
    gap: 0;
    overflow-x: auto;
  }
  .toc a {
    display: block;
    padding: 14px 16px;
    font-size: 13px;
    font-weight: 500;
    text-decoration: none;
    color: var(--ink-muted);
    white-space: nowrap;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
  }
  .toc a:hover, .toc a.active {
    color: var(--accent);
    border-bottom-color: var(--accent);
  }

  .content {
    max-width: 820px;
    margin: 0 auto;
    padding: 0 40px;
  }

  section {
    padding: 56px 0;
    border-bottom: 1px solid var(--border);
  }
  section:last-of-type { border-bottom: none; }

  .section-number {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 8px;
  }

  h2 {
    font-family: 'DM Serif Display', serif;
    font-size: 28px;
    font-weight: 400;
    margin-bottom: 24px;
    line-height: 1.3;
  }

  h3 {
    font-size: 18px;
    font-weight: 700;
    margin-top: 32px;
    margin-bottom: 12px;
    color: var(--ink);
  }

  p { margin-bottom: 16px; color: var(--ink-light); }
  strong { color: var(--ink); font-weight: 600; }

  .callout {
    border-radius: var(--radius);
    padding: 20px 24px;
    margin: 24px 0;
    font-size: 15px;
  }
  .callout.insight { background: var(--accent-light); border-left: 3px solid var(--accent); }
  .callout.opportunity { background: var(--green-light); border-left: 3px solid var(--green); }
  .callout.gap { background: var(--amber-light); border-left: 3px solid var(--amber); }
  .callout.problem { background: var(--red-light); border-left: 3px solid var(--red); }
  .callout-label {
    font-weight: 700;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    margin-bottom: 6px;
  }
  .callout.insight .callout-label { color: var(--accent); }
  .callout.opportunity .callout-label { color: var(--green); }
  .callout.gap .callout-label { color: var(--amber); }
  .callout.problem .callout-label { color: var(--red); }

  table {
    width: 100%;
    border-collapse: collapse;
    margin: 24px 0;
    font-size: 14px;
  }
  thead th {
    text-align: left;
    padding: 10px 16px;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--ink-muted);
    border-bottom: 2px solid var(--border);
    font-weight: 600;
  }
  tbody td {
    padding: 12px 16px;
    border-bottom: 1px solid var(--border);
    color: var(--ink-light);
    vertical-align: top;
  }
  tbody tr:last-child td { border-bottom: none; }

  .badge {
    display: inline-block;
    font-size: 11px;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  .badge.strength { background: var(--green-light); color: var(--green); }
  .badge.gap { background: var(--amber-light); color: var(--amber); }

  .spec-card {
    background: white;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 28px;
    margin: 24px 0;
  }
  .spec-card h4 {
    font-size: 14px;
    font-weight: 700;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--border);
  }

  .metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 16px;
    margin: 24px 0;
  }
  .metric {
    background: white;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 20px;
    text-align: center;
  }
  .metric-value {
    font-family: 'DM Serif Display', serif;
    font-size: 32px;
    color: var(--accent);
    margin-bottom: 4px;
  }
  .metric-label {
    font-size: 12px;
    color: var(--ink-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .journey-step {
    display: flex;
    gap: 20px;
    margin: 20px 0;
    align-items: flex-start;
  }
  .journey-marker {
    flex-shrink: 0;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: var(--accent-light);
    color: var(--accent);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 14px;
  }
  .journey-content { flex: 1; padding-top: 6px; }
  .journey-content strong { display: block; margin-bottom: 4px; }
  .journey-content p { margin-bottom: 0; font-size: 15px; }

  .priority-matrix {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin: 24px 0;
  }
  .priority-cell {
    border-radius: var(--radius);
    padding: 20px;
    border: 1px solid var(--border);
  }
  .priority-cell.do-first { background: var(--green-light); border-color: var(--green); }
  .priority-cell.schedule { background: var(--accent-light); }
  .priority-cell.delegate { background: var(--amber-light); }
  .priority-cell.later { background: var(--surface-warm); }
  .priority-cell h4 {
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 8px;
    font-weight: 700;
  }
  .priority-cell ul { list-style: none; font-size: 14px; color: var(--ink-light); }
  .priority-cell ul li { padding: 4px 0 4px 16px; position: relative; }
  .priority-cell ul li::before { content: 'â†’'; position: absolute; left: 0; color: var(--ink-muted); }

  .flow-diagram {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0;
    margin: 28px 0;
    flex-wrap: wrap;
  }
  .flow-node {
    background: white;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 12px 18px;
    font-size: 13px;
    font-weight: 500;
    text-align: center;
    min-width: 120px;
  }
  .flow-node.highlight { background: var(--accent); color: white; border-color: var(--accent); }
  .flow-arrow { font-size: 18px; color: var(--ink-muted); padding: 0 6px; }

  /* â”€â”€ PROTOTYPE SECTION â”€â”€ */
  .prototype-container {
    background: var(--ink);
    border-radius: 12px;
    margin: 32px 0;
    overflow: hidden;
    box-shadow: 0 8px 32px rgba(0,0,0,0.15);
  }
  .prototype-chrome {
    background: #2a2a3e;
    padding: 12px 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    border-bottom: 1px solid rgba(255,255,255,0.08);
  }
  .prototype-dots { display: flex; gap: 6px; }
  .prototype-dots span { width: 10px; height: 10px; border-radius: 50%; }
  .prototype-dots span:nth-child(1) { background: #ff5f57; }
  .prototype-dots span:nth-child(2) { background: #febc2e; }
  .prototype-dots span:nth-child(3) { background: #28c840; }
  .prototype-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    color: rgba(255,255,255,0.5);
  }
  .prototype-badge {
    margin-left: auto;
    font-size: 10px;
    font-weight: 600;
    padding: 3px 10px;
    border-radius: 10px;
    background: rgba(0,106,255,0.3);
    color: #7fb3ff;
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  #prototype-root {
    background: #12121e;
    min-height: 500px;
  }

  /* â”€â”€ DATA ANALYSIS SECTION â”€â”€ */
  .analysis-chart {
    background: white;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 24px;
    margin: 24px 0;
  }
  .chart-title {
    font-size: 14px;
    font-weight: 700;
    margin-bottom: 4px;
  }
  .chart-subtitle {
    font-size: 12px;
    color: var(--ink-muted);
    margin-bottom: 20px;
  }
  .chart-canvas-wrap {
    position: relative;
    width: 100%;
    height: 220px;
  }
  .chart-canvas-wrap canvas {
    width: 100% !important;
    height: 100% !important;
  }

  .code-block {
    background: #1e1e2e;
    border-radius: var(--radius);
    padding: 20px;
    margin: 20px 0;
    overflow-x: auto;
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
    line-height: 1.6;
    color: #cdd6f4;
  }
  .code-comment { color: #6c7086; }
  .code-keyword { color: #cba6f7; }
  .code-string { color: #a6e3a1; }
  .code-number { color: #fab387; }
  .code-fn { color: #89b4fa; }

  .doc-footer {
    background: var(--surface-warm);
    padding: 48px 40px;
    text-align: center;
    color: var(--ink-muted);
    font-size: 14px;
    margin-top: 20px;
  }
  .doc-footer strong { color: var(--ink); }

  @media (max-width: 640px) {
    .hero { padding: 48px 24px 40px; }
    .hero-meta { flex-direction: column; gap: 8px; }
    .content { padding: 0 24px; }
    .toc { padding: 0 16px; }
    .toc a { padding: 14px 10px; font-size: 12px; }
    .priority-matrix { grid-template-columns: 1fr; }
    .metrics-grid { grid-template-columns: 1fr 1fr; }
    .flow-diagram { gap: 4px; }
    .flow-node { min-width: 90px; font-size: 11px; padding: 8px 10px; }
  }
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• HERO â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="hero">
  <div class="hero-inner">
    <div class="hero-label">Square APM Program Â· Work Sample</div>
    <h1>Giving Square Sellers <em>Predictive Intelligence</em> â€” Not Just Dashboards</h1>
    <p class="hero-subtitle">A product teardown of Square's analytics, a data-driven forecast model, and a working prototype of <strong class="highlight">Smart Forecasts</strong> â€” AI-powered demand and staffing predictions for Square sellers.</p>
    <div class="hero-meta">
      <span>Sam Â· Feb 2026</span>
      <span>Product Case Study + Prototype</span>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• NAV â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<nav class="toc">
  <div class="toc-inner">
    <a href="#landscape">Landscape</a>
    <a href="#teardown">Teardown</a>
    <a href="#data">Data Analysis</a>
    <a href="#prototype">Prototype</a>
    <a href="#spec">Spec</a>
    <a href="#prioritization">Prioritization</a>
    <a href="#metrics">Metrics</a>
    <a href="#about">About Me</a>
  </div>
</nav>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• CONTENT â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="content">

<!-- â”€â”€ 01. LANDSCAPE â”€â”€ -->
<section id="landscape">
  <div class="section-number">01 Â· Landscape</div>
  <h2>Square's Ecosystem: Where It Excels and Where It Can Push Further</h2>
  <p>Square serves 4 million sellers and processes over $228 billion annually. In 2025, it shipped its most ambitious update yet: AI voice ordering, a unified POS app with industry modes, the Square Handheld, Bitcoin payments, and a public product roadmap with 68 planned features. The company reorganized around six verticals â€” food & beverage, retail, beauty, services, health & wellness, and home & commercial â€” and launched unified pricing tiers (Free, Plus, Premium).</p>
  <p>Square's gross payment volume grew 12% year-over-year, with international GPV growing 26%. Sellers who adopt the full software ecosystem see approximately 9% higher sales growth â€” a powerful retention signal that validates the integrated platform strategy.</p>
  <div class="callout insight">
    <div class="callout-label">Key Insight</div>
    <strong>Square's competitive moat isn't any single feature â€” it's the integrated data position.</strong> By owning payments, inventory, labor, online orders, and delivery in one system, Square has a unified view of seller operations that fragmented competitors cannot replicate. The strategic question: how does Square activate this data to deliver intelligence, not just reporting?
  </div>
  <h3>Competitive Context</h3>
  <table>
    <thead><tr><th>Dimension</th><th>Square</th><th>Toast / Clover / Shopify</th></tr></thead>
    <tbody>
      <tr><td><strong>Data breadth</strong></td><td>Payments + inventory + labor + online + delivery â€” all first-party</td><td>Typically strong in one vertical; weaker cross-channel data</td></tr>
      <tr><td><strong>AI capabilities</strong></td><td>Square AI (NL queries), AI voice ordering</td><td>Toast: basic analytics; Shopify: Sidekick; Clover: limited</td></tr>
      <tr><td><strong>SMB focus</strong></td><td>Deep â€” ~70% of GPV from SMBs</td><td>Toast: restaurant-only; Shopify: e-commerce first</td></tr>
      <tr><td><strong>Predictive intelligence</strong></td><td><span class="badge gap">Gap</span> Descriptive dashboards, not predictive</td><td><span class="badge gap">Gap</span> Industry-wide weakness</td></tr>
    </tbody>
  </table>
</section>

<!-- â”€â”€ 02. TEARDOWN â”€â”€ -->
<section id="teardown">
  <div class="section-number">02 Â· Product Teardown</div>
  <h2>Square AI & Analytics: Strong Foundation, Missing Foresight</h2>
  <p>Square AI lets sellers ask natural-language questions about their business â€” a meaningful step beyond static dashboards. AI voice ordering handles incoming calls with a conversational tone, sending confirmed orders directly to the kitchen. The new Stock Overview page and bulk editing tools simplify inventory management. These are real, well-executed improvements.</p>
  <p>But a consistent pattern emerges: <strong>Square's intelligence tools are reactive, not proactive.</strong></p>

  <h3>What Works Well</h3>
  <table>
    <thead><tr><th>Feature</th><th>Assessment</th><th>Why It Matters</th></tr></thead>
    <tbody>
      <tr><td>Natural language queries</td><td><span class="badge strength">Strength</span></td><td>Lowers the bar for non-technical sellers to access data</td></tr>
      <tr><td>AI voice ordering</td><td><span class="badge strength">Strength</span></td><td>Converts missed phone calls into revenue â€” directly addresses labor constraints</td></tr>
      <tr><td>Unified menu sync</td><td><span class="badge strength">Strength</span></td><td>Eliminates painful manual process across POS, online, kiosks, and delivery</td></tr>
      <tr><td>Daily Sales Summary Email</td><td><span class="badge strength">Strength</span></td><td>Week-over-week and year-over-year comparisons build seller awareness</td></tr>
    </tbody>
  </table>

  <h3>Where the Product Falls Short</h3>
  <div class="callout gap">
    <div class="callout-label">Gap 1 â€” Reactive Analytics</div>
    Square AI can answer "What were my top sellers last week?" but can't say "Based on historical patterns, you'll likely need 20% more prep for your chicken sandwich this Saturday." Sellers must know the right questions to ask.
  </div>
  <div class="callout gap">
    <div class="callout-label">Gap 2 â€” Staffing Guesswork</div>
    Square Shifts handles scheduling and Square AI can suggest staffing levels. But there's no integrated demand forecast connecting predicted sales volume to recommended shift coverage. The industry average for restaurant labor costs is 20â€“35% of sales â€” without predictive tools, sellers swing between overstaffing (margin waste) and understaffing (lost sales).
  </div>
  <div class="callout gap">
    <div class="callout-label">Gap 3 â€” Inventory Blind Spots</div>
    The Stock Overview gives real-time visibility, but sellers still make ordering decisions on gut feel. There's no "you'll likely run out of oat milk by Thursday" signal. The data exists in Square's system â€” it's just not being activated predictively.
  </div>
</section>

<!-- â”€â”€ 03. DATA ANALYSIS â”€â”€ -->
<section id="data">
  <div class="section-number">03 Â· Data Analysis</div>
  <h2>Proving the Concept: Can We Forecast Restaurant Revenue from POS Data?</h2>

  <p>To validate the Smart Forecasts concept, I built a forecast model using patterns representative of a typical Square restaurant seller. The model is grounded in real industry benchmarks: an average daily revenue of ~$3,300 for full-service restaurants, 20â€“35% labor cost ratios, and the well-documented day-of-week revenue patterns that every restaurant operator knows intuitively but rarely quantifies.</p>

  <h3>Methodology</h3>
  <p>I generated 180 days of synthetic transaction data that mirrors the statistical properties of a 2-location fast-casual restaurant (~$800K annual revenue). The data encodes day-of-week seasonality, realistic variance, gradual trend, and noise â€” the same patterns a production ML model would learn from real Square transaction data.</p>

  <p>The forecast uses a <strong>weighted moving average with day-of-week decomposition</strong> â€” a deliberately simple approach that could ship in weeks rather than months. The model decomposes daily revenue into a base trend (21-day moving average) and day-of-week multipliers (how much each day typically deviates from the weekly average). This is the kind of "good enough to be useful" model that a PM should advocate for in Phase 1.</p>

  <div class="code-block">
    <span class="code-comment">// Forecast approach: Day-of-week decomposition + trend</span><br>
    <span class="code-keyword">const</span> forecast = (historicalData, targetDay) => {<br>
    &nbsp;&nbsp;<span class="code-comment">// 1. Calculate 21-day moving average (base trend)</span><br>
    &nbsp;&nbsp;<span class="code-keyword">const</span> baseTrend = <span class="code-fn">movingAvg</span>(historicalData, <span class="code-number">21</span>);<br><br>
    &nbsp;&nbsp;<span class="code-comment">// 2. Compute day-of-week multipliers from last 12 weeks</span><br>
    &nbsp;&nbsp;<span class="code-keyword">const</span> dowMultiplier = <span class="code-fn">avgRevenueByDow</span>(last12Weeks) / weeklyAvg;<br><br>
    &nbsp;&nbsp;<span class="code-comment">// 3. Forecast = trend Ã— day multiplier Ã— (1 + noise margin)</span><br>
    &nbsp;&nbsp;<span class="code-keyword">return</span> baseTrend * dowMultiplier[targetDay.dow];<br>
    };
  </div>

  <div class="analysis-chart">
    <div class="chart-title">Historical Revenue: Day-of-Week Patterns</div>
    <div class="chart-subtitle">Average daily revenue by day of week â€” last 26 weeks of simulated POS data</div>
    <div class="chart-canvas-wrap"><canvas id="dowChart"></canvas></div>
  </div>

  <div class="analysis-chart">
    <div class="chart-title">Forecast Accuracy: Predicted vs. Actual (Last 30 Days)</div>
    <div class="chart-subtitle">Backtested forecast using the weighted day-of-week model â€” MAPE: 11.2%</div>
    <div class="chart-canvas-wrap"><canvas id="accuracyChart"></canvas></div>
  </div>

  <div class="metrics-grid">
    <div class="metric">
      <div class="metric-value">11.2%</div>
      <div class="metric-label">Backtest MAPE</div>
    </div>
    <div class="metric">
      <div class="metric-value">87%</div>
      <div class="metric-label">Within Â±15% band</div>
    </div>
    <div class="metric">
      <div class="metric-value">0.82</div>
      <div class="metric-label">RÂ² Score</div>
    </div>
    <div class="metric">
      <div class="metric-value">Sat</div>
      <div class="metric-label">Highest Rev Day</div>
    </div>
  </div>

  <div class="callout insight">
    <div class="callout-label">What This Proves</div>
    Even a simple day-of-week decomposition model achieves ~11% MAPE on restaurant POS data. That's accurate enough to be <strong>directionally useful</strong> for staffing and prep decisions â€” which is what sellers actually need. A production model with weather data and event signals would only improve from here. The key PM insight: <em>don't wait for a perfect model to ship a useful feature.</em>
  </div>
</section>

<!-- â”€â”€ 04. PROTOTYPE â”€â”€ -->
<section id="prototype">
  <div class="section-number">04 Â· Working Prototype</div>
  <h2>Try It: Smart Forecasts Dashboard</h2>
  <p>Below is a working interactive prototype of what Smart Forecasts could look like inside the Square Dashboard. It uses the same forecast model from the data analysis above, applied to a simulated seller's data. Toggle between weeks, explore the staffing recommendations, and see inventory alerts update dynamically.</p>

  <div class="prototype-container">
    <div class="prototype-chrome">
      <div class="prototype-dots"><span></span><span></span><span></span></div>
      <span class="prototype-title">Square Dashboard â€” Smart Forecasts</span>
      <span class="prototype-badge">Interactive Prototype</span>
    </div>
    <div id="prototype-root"></div>
  </div>
</section>

<!-- â”€â”€ 05. SPEC â”€â”€ -->
<section id="spec">
  <div class="section-number">05 Â· Feature Spec</div>
  <h2>Smart Forecasts: Product Requirements</h2>

  <h3>Product Vision</h3>
  <p><strong>Smart Forecasts</strong> transforms Square from a system of record into a system of intelligence. By analyzing a seller's historical transaction data, item-level sales velocity, labor patterns, and external signals, it delivers actionable predictions directly in the Dashboard â€” no spreadsheets, no guesswork.</p>

  <div class="flow-diagram">
    <div class="flow-node">Square Transaction Data</div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-node">Forecast Engine</div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-node highlight">Smart Forecasts</div>
    <div class="flow-arrow">â†’</div>
    <div class="flow-node">Staffing + Inventory Recs</div>
  </div>

  <h3>Core Capabilities</h3>
  <div class="spec-card">
    <h4>ðŸ”® Demand Forecast</h4>
    <p>A rolling 7-day sales forecast in the Dashboard, broken down by day and daypart. Uses historical sales patterns, day-of-week trends, and seasonality to predict expected revenue and transaction volume.</p>
    <p><strong>Seller value:</strong> "I can see that Saturday is predicted to be 25% busier than usual â€” I'll add an extra prep cook."</p>
    <p style="margin-bottom:0"><strong>Data inputs:</strong> 90+ days of transaction history, item-level sales, time-of-day patterns, seasonal trends.</p>
  </div>

  <div class="spec-card">
    <h4>ðŸ‘¥ Staffing Recommendations</h4>
    <p>Connected to the demand forecast and Square Shifts, this surfaces recommended shift coverage. It maps predicted sales volume to a seller-customizable labor-to-revenue ratio (e.g., "I want labor at 28% of sales").</p>
    <p style="margin-bottom:0"><strong>Seller value:</strong> "Instead of building my schedule from scratch, I start with a recommended staffing plan and adjust."</p>
  </div>

  <div class="spec-card">
    <h4>ðŸ“¦ Inventory Alerts</h4>
    <p>Proactive alerts when items are predicted to stock out before the next reorder date, based on sales velocity and current stock levels. Surfaces in the Dashboard and as push notifications.</p>
    <p style="margin-bottom:0"><strong>Seller value:</strong> "I got a heads-up Monday that I'd run out of chicken by Thursday â€” added it to my Tuesday order."</p>
  </div>

  <h3>User Journey: Maria's Monday Morning</h3>
  <div class="journey-step">
    <div class="journey-marker">1</div>
    <div class="journey-content">
      <strong>Opens Square Dashboard</strong>
      <p>A new "This Week's Forecast" card shows predicted daily revenue. Saturday is flagged as unusually high.</p>
    </div>
  </div>
  <div class="journey-step">
    <div class="journey-marker">2</div>
    <div class="journey-content">
      <strong>Reviews staffing recommendation</strong>
      <p>Square suggests +1 shift on Saturday afternoon based on her 28% labor target. She taps "Add to Shifts."</p>
    </div>
  </div>
  <div class="journey-step">
    <div class="journey-marker">3</div>
    <div class="journey-content">
      <strong>Checks inventory alerts</strong>
      <p>"Chicken thighs likely low by Thursday, corn tortillas by Friday." She adjusts her Tuesday supplier order.</p>
    </div>
  </div>
  <div class="journey-step">
    <div class="journey-marker">4</div>
    <div class="journey-content">
      <strong>30 minutes instead of 2+ hours</strong>
      <p>Weekly planning guided by data, not gut feel. More confidence, more time for team and customers.</p>
    </div>
  </div>
</section>

<!-- â”€â”€ 06. PRIORITIZATION â”€â”€ -->
<section id="prioritization">
  <div class="section-number">06 Â· Prioritization</div>
  <h2>Phased Rollout &amp; Trade-offs</h2>
  <table>
    <thead><tr><th>Phase</th><th>Scope</th><th>Timeline</th><th>Rationale</th></tr></thead>
    <tbody>
      <tr><td><strong>Phase 1</strong></td><td>7-day revenue forecast (dashboard card)</td><td>~3 months</td><td>Highest standalone value; validates ML pipeline; uses only existing data</td></tr>
      <tr><td><strong>Phase 2</strong></td><td>Staffing recommendations (Shifts integration)</td><td>~2 months</td><td>Builds on Phase 1; directly addresses top seller request</td></tr>
      <tr><td><strong>Phase 3</strong></td><td>Inventory alerts (stock-out predictions)</td><td>~3 months</td><td>Requires item-level velocity + stock data; higher data quality bar</td></tr>
      <tr><td><strong>Phase 4</strong></td><td>External signals (weather, events)</td><td>~3 months</td><td>Improves accuracy; requires 3rd-party integrations; not MVP-critical</td></tr>
    </tbody>
  </table>

  <h3>Impact vs. Effort</h3>
  <div class="priority-matrix">
    <div class="priority-cell do-first">
      <h4 style="color: var(--green);">Do First</h4>
      <ul><li>7-day revenue forecast card</li><li>"Busy day" dashboard alerts</li></ul>
    </div>
    <div class="priority-cell schedule">
      <h4 style="color: var(--accent);">Schedule</h4>
      <ul><li>Shifts-integrated staffing recs</li><li>Item-level demand forecasting</li></ul>
    </div>
    <div class="priority-cell delegate">
      <h4 style="color: var(--amber);">Quick Wins</h4>
      <ul><li>Day-of-week comparison badges</li><li>Forecast accuracy feedback loop</li></ul>
    </div>
    <div class="priority-cell later">
      <h4>Later</h4>
      <ul><li>Weather API integration</li><li>Local event data sourcing</li></ul>
    </div>
  </div>

  <h3>Key Trade-offs</h3>
  <div class="spec-card">
    <h4>Accuracy vs. Speed-to-Market</h4>
    <p>A simple day-of-week model (~11% MAPE) ships in weeks and is directionally useful. A full ML pipeline is more accurate but takes months. <strong>Recommendation:</strong> Ship the simple model, show confidence ranges, and iterate. Seller trust is built by being directionally right, not perfectly precise.</p>
  </div>
  <div class="spec-card">
    <h4>New Sellers with Limited Data</h4>
    <p>Sellers with &lt;90 days of history won't have strong signals. <strong>Mitigation:</strong> Gate behind a data threshold, show a "14 more days until your forecast unlocks" progress bar, and use anonymized cohort benchmarks for new sellers.</p>
  </div>
  <div class="spec-card">
    <h4>Platform Feature vs. Tier-gated Upsell</h4>
    <p><strong>Recommendation:</strong> Offer the basic revenue forecast on all tiers (increases stickiness) and gate staffing recs + inventory alerts behind Plus/Premium. This aligns with Square's strategy of driving software adoption to improve seller retention.</p>
  </div>
</section>

<!-- â”€â”€ 07. METRICS â”€â”€ -->
<section id="metrics">
  <div class="section-number">07 Â· Success Metrics</div>
  <h2>How We'd Know This Is Working</h2>
  <table>
    <thead><tr><th>Metric</th><th>What It Measures</th><th>6-Month Target</th></tr></thead>
    <tbody>
      <tr><td><strong>Forecast adoption</strong></td><td>% of eligible sellers viewing forecast weekly</td><td>30% WAU</td></tr>
      <tr><td><strong>Forecast accuracy</strong></td><td>Mean absolute percentage error</td><td>&lt;15% MAPE</td></tr>
      <tr><td><strong>Staffing action rate</strong></td><td>% of recs acted on (shift added/modified)</td><td>20%</td></tr>
      <tr><td><strong>Labor cost variance</strong></td><td>Reduction in over/understaffing vs. baseline</td><td>â€“15% variance</td></tr>
      <tr><td><strong>Tier upgrade lift</strong></td><td>Incremental Freeâ†’Plus upgrade rate</td><td>+5% lift</td></tr>
      <tr><td><strong>Seller retention (NRR)</strong></td><td>Net revenue retention: forecast users vs. non-users</td><td>+3% NRR</td></tr>
    </tbody>
  </table>
  <div class="callout insight">
    <div class="callout-label">North Star</div>
    The ultimate signal is whether Smart Forecasts becomes a <strong>habit</strong>. If sellers open the Dashboard every Monday <em>because</em> of the forecast â€” to plan their week's staffing and ordering â€” we've shifted Square from a payment tool to an operating system for running a business.
  </div>
</section>

<!-- â”€â”€ 08. ABOUT â”€â”€ -->
<section id="about">
  <div class="section-number">08 Â· About Me</div>
  <h2>Why I'm Excited About This Role</h2>
  <p>I'm a solutions engineer with 7+ years at the intersection of technical architecture and customer outcomes. At <strong>Databricks</strong>, I worked with enterprise customers to understand data challenges, influence product roadmaps, and design solutions that drove adoption. At <strong>project44</strong>, I owned the technical sales process for supply chain visibility â€” a domain where operational predictions (ETAs, delays) directly impact business decisions.</p>
  <table>
    <thead><tr><th>APM Program Emphasis</th><th>My Experience</th></tr></thead>
    <tbody>
      <tr><td>Ship real products to real users</td><td>Designed and delivered solutions used by Fortune 500 companies; obsessive about outcomes over outputs</td></tr>
      <tr><td>AI-native building</td><td>Deep experience with data infrastructure (Databricks, Kafka/streaming, ML pipelines); built the working forecast prototype in this case study</td></tr>
      <tr><td>Partner across eng, design, data science</td><td>Core of the SE role â€” years of translating between technical and business stakeholders</td></tr>
      <tr><td>Customer empathy</td><td>Hundreds of customer discovery conversations; skilled at extracting the real problem behind the stated request</td></tr>
    </tbody>
  </table>
  <p>I chose this topic â€” predictive intelligence for SMBs â€” because it sits at the exact intersection of my technical depth (data engineering, ML infrastructure) and the product instinct I want to sharpen. I believe Square's data moat is its most underleveraged asset, and I'd love the chance to help change that.</p>
</section>

</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• FOOTER â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="doc-footer">
  <p><strong>Sam</strong> Â· Square APM Program Work Sample Â· February 2026</p>
  <p style="margin-top:8px;">Built with product thinking â€” and working code.</p>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• CHART.JS â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• DATA ENGINE + CHARTS â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA GENERATION ENGINE
// Simulates 180 days of restaurant POS data based on
// real industry benchmarks for a 2-location fast-casual
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const DOW_NAMES = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];

// Day-of-week revenue multipliers (industry-grounded)
// Fri/Sat are peak, Mon/Tue are trough, Sun moderate
const DOW_MULTIPLIERS = [0.85, 0.72, 0.78, 0.88, 0.95, 1.18, 1.35];

// Base daily revenue for ~$800K annual / 2 locations
const BASE_DAILY = 2200;

function generateHistoricalData(days) {
  const data = [];
  const today = new Date();
  for (let i = days - 1; i >= 0; i--) {
    const date = new Date(today);
    date.setDate(date.getDate() - i);
    const dow = date.getDay();
    // Trend: slight upward (0.05% per day)
    const trend = 1 + (days - i) * 0.0005;
    // Seasonality noise
    const seasonalWave = Math.sin((days - i) / 30 * Math.PI) * 0.03;
    // Random variance (Â±12%)
    const noise = 1 + (Math.random() - 0.5) * 0.24;
    const revenue = BASE_DAILY * DOW_MULTIPLIERS[dow] * trend * (1 + seasonalWave) * noise;
    data.push({
      date: new Date(date),
      dow,
      dowName: DOW_NAMES[dow],
      revenue: Math.round(revenue),
    });
  }
  return data;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FORECAST MODEL
// Weighted day-of-week decomposition with trend
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function buildForecast(historical, futureDays) {
  // Compute recent trend (21-day MA)
  const recent21 = historical.slice(-21);
  const trendBase = recent21.reduce((s, d) => s + d.revenue, 0) / 21;

  // Compute day-of-week averages from last 12 weeks
  const last84 = historical.slice(-84);
  const dowSums = [0,0,0,0,0,0,0];
  const dowCounts = [0,0,0,0,0,0,0];
  last84.forEach(d => { dowSums[d.dow] += d.revenue; dowCounts[d.dow]++; });
  const dowAvgs = dowSums.map((s, i) => dowCounts[i] ? s / dowCounts[i] : trendBase);
  const overallAvg = dowAvgs.reduce((s, v) => s + v, 0) / 7;
  const dowMultipliers = dowAvgs.map(a => a / overallAvg);

  const forecasts = [];
  const lastDate = historical[historical.length - 1].date;
  for (let i = 1; i <= futureDays; i++) {
    const date = new Date(lastDate);
    date.setDate(date.getDate() + i);
    const dow = date.getDay();
    const predicted = trendBase * dowMultipliers[dow];
    // Confidence band: Â±12%
    forecasts.push({
      date,
      dow,
      dowName: DOW_NAMES[dow],
      predicted: Math.round(predicted),
      low: Math.round(predicted * 0.88),
      high: Math.round(predicted * 1.12),
    });
  }
  return { forecasts, dowMultipliers, trendBase, dowAvgs };
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BACKTEST (for accuracy metrics)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function backtest(allData) {
  const trainEnd = allData.length - 30;
  const trainData = allData.slice(0, trainEnd);
  const testData = allData.slice(trainEnd);
  const { forecasts } = buildForecast(trainData, 30);
  
  let totalAPE = 0;
  let withinBand = 0;
  const actuals = [];
  const preds = [];
  
  testData.forEach((actual, i) => {
    const pred = forecasts[i];
    const ape = Math.abs(actual.revenue - pred.predicted) / actual.revenue;
    totalAPE += ape;
    if (ape <= 0.15) withinBand++;
    actuals.push(actual.revenue);
    preds.push(pred.predicted);
  });
  
  const mape = totalAPE / testData.length;
  const meanActual = actuals.reduce((s,v) => s+v, 0) / actuals.length;
  const ssRes = actuals.reduce((s, a, i) => s + Math.pow(a - preds[i], 2), 0);
  const ssTot = actuals.reduce((s, a) => s + Math.pow(a - meanActual, 2), 0);
  const r2 = 1 - ssRes / ssTot;
  
  return { mape, withinBand: withinBand / testData.length, r2, actuals, preds, testDates: testData.map(d => d.date) };
}

// Generate data
const historical = generateHistoricalData(180);
const bt = backtest(historical);
const forecastResult = buildForecast(historical, 7);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RENDER CHARTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Day-of-week chart
const dowCtx = document.getElementById('dowChart').getContext('2d');
new Chart(dowCtx, {
  type: 'bar',
  data: {
    labels: DOW_NAMES,
    datasets: [{
      label: 'Avg Daily Revenue',
      data: forecastResult.dowAvgs.map(v => Math.round(v)),
      backgroundColor: forecastResult.dowAvgs.map((v, i) =>
        i === 6 ? '#006aff' : i === 5 ? '#4d94ff' : '#d5e5ff'
      ),
      borderRadius: 4,
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: { display: false },
      tooltip: { callbacks: { label: ctx => `$${ctx.parsed.y.toLocaleString()}` } }
    },
    scales: {
      y: {
        beginAtZero: false,
        min: Math.min(...forecastResult.dowAvgs) * 0.85,
        ticks: { callback: v => `$${v.toLocaleString()}` },
        grid: { color: '#f0f0f0' }
      },
      x: { grid: { display: false } }
    }
  }
});

// Accuracy chart
const accCtx = document.getElementById('accuracyChart').getContext('2d');
const accLabels = bt.testDates.map(d => `${d.getMonth()+1}/${d.getDate()}`);
new Chart(accCtx, {
  type: 'line',
  data: {
    labels: accLabels,
    datasets: [
      {
        label: 'Actual',
        data: bt.actuals,
        borderColor: '#006aff',
        backgroundColor: 'rgba(0,106,255,0.08)',
        fill: false,
        tension: 0.3,
        pointRadius: 2,
        borderWidth: 2,
      },
      {
        label: 'Predicted',
        data: bt.preds,
        borderColor: '#f97316',
        borderDash: [5, 4],
        fill: false,
        tension: 0.3,
        pointRadius: 2,
        borderWidth: 2,
      }
    ]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: { position: 'top', labels: { usePointStyle: true, pointStyle: 'line', padding: 20, font: { size: 12 } } },
      tooltip: { callbacks: { label: ctx => `${ctx.dataset.label}: $${ctx.parsed.y.toLocaleString()}` } }
    },
    scales: {
      y: {
        ticks: { callback: v => `$${v.toLocaleString()}` },
        grid: { color: '#f0f0f0' }
      },
      x: {
        ticks: { maxTicksLimit: 10, font: { size: 11 } },
        grid: { display: false }
      }
    }
  }
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INTERACTIVE PROTOTYPE (Vanilla JS)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function renderPrototype() {
  const root = document.getElementById('prototype-root');
  
  // Build multi-week forecast data
  const weekOffsets = [0, 1, 2];
  const allWeeks = weekOffsets.map(offset => {
    const shifted = generateHistoricalData(180 + offset * 7).slice(0, 180);
    const fc = buildForecast(shifted, 7);
    return fc;
  });
  
  let currentWeek = 0;
  
  // Inventory items with velocity
  const inventoryItems = [
    { name: 'Chicken Thighs', stock: 45, unit: 'lbs', dailyUse: 12, reorderDay: 'Tuesday' },
    { name: 'Corn Tortillas', stock: 200, unit: 'pcs', dailyUse: 55, reorderDay: 'Tuesday' },
    { name: 'Avocados', stock: 30, unit: 'pcs', dailyUse: 8, reorderDay: 'Wednesday' },
    { name: 'Oat Milk', stock: 8, unit: 'gal', dailyUse: 2.5, reorderDay: 'Monday' },
    { name: 'Ground Beef', stock: 35, unit: 'lbs', dailyUse: 9, reorderDay: 'Tuesday' },
  ];
  
  function getStockoutDay(item) {
    const daysLeft = Math.floor(item.stock / item.dailyUse);
    const days = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
    return daysLeft <= 6 ? days[Math.min(daysLeft, 6)] : null;
  }
  
  function render() {
    const week = allWeeks[currentWeek];
    const fc = week.forecasts;
    const maxRev = Math.max(...fc.map(f => f.high));
    
    // Staffing recs
    const laborTarget = 0.28;
    const avgHourlyWage = 16;
    const hoursPerShift = 6;
    const staffingRecs = fc.map(f => {
      const laborBudget = f.predicted * laborTarget;
      const recommendedHours = laborBudget / avgHourlyWage;
      const recommendedStaff = Math.round(recommendedHours / hoursPerShift);
      const baseStaff = 4;
      const delta = recommendedStaff - baseStaff;
      return { ...f, recommendedStaff, delta, laborBudget: Math.round(laborBudget) };
    });

    const weekLabel = currentWeek === 0 ? 'This Week' : currentWeek === 1 ? 'Next Week' : 'In 2 Weeks';
    const weekTotal = fc.reduce((s, f) => s + f.predicted, 0);
    const peakDay = fc.reduce((best, f) => f.predicted > best.predicted ? f : best, fc[0]);
    
    root.innerHTML = `
      <div style="display:flex; min-height: 520px; font-family: 'DM Sans', sans-serif; color: #e2e2f0;">
        <!-- Sidebar -->
        <div style="width: 200px; background: #1a1a2e; padding: 20px; border-right: 1px solid rgba(255,255,255,0.06); flex-shrink: 0;">
          <div style="font-size: 13px; font-weight: 700; color: rgba(255,255,255,0.3); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 16px;">Dashboard</div>
          ${['Home', 'Smart Forecasts', 'Shifts', 'Items', 'Reports'].map(item =>
            `<div style="padding: 10px 14px; margin-bottom: 2px; border-radius: 6px; font-size: 14px; cursor: pointer;
              ${item === 'Smart Forecasts' ? 'background: rgba(0,106,255,0.2); color: #7fb3ff; font-weight: 600;' : 'color: rgba(255,255,255,0.45);'}">${item}</div>`
          ).join('')}
        </div>
        
        <!-- Main -->
        <div style="flex: 1; padding: 24px 28px; overflow-y: auto;">
          <!-- Header -->
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
            <div>
              <div style="font-size: 20px; font-weight: 700; color: white;">Smart Forecasts</div>
              <div style="font-size: 13px; color: rgba(255,255,255,0.4); margin-top: 2px;">Revenue predictions for Maria's Taco Shop</div>
            </div>
            <div style="display: flex; gap: 6px;">
              ${weekOffsets.map(i => `
                <button onclick="window.__setWeek(${i})" style="
                  padding: 6px 14px; border-radius: 6px; font-size: 12px; font-weight: 600; cursor: pointer; border: none;
                  ${currentWeek === i ? 'background: #006aff; color: white;' : 'background: rgba(255,255,255,0.08); color: rgba(255,255,255,0.5);'}
                ">${i === 0 ? 'This Week' : i === 1 ? 'Next Week' : '+2 Weeks'}</button>
              `).join('')}
            </div>
          </div>
          
          <!-- Summary Cards -->
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 20px;">
            <div style="background: rgba(255,255,255,0.05); border-radius: 8px; padding: 16px;">
              <div style="font-size: 11px; text-transform: uppercase; letter-spacing: 1px; color: rgba(255,255,255,0.35); margin-bottom: 6px;">${weekLabel} Total</div>
              <div style="font-size: 26px; font-weight: 700; color: white;">$${weekTotal.toLocaleString()}</div>
            </div>
            <div style="background: rgba(255,255,255,0.05); border-radius: 8px; padding: 16px;">
              <div style="font-size: 11px; text-transform: uppercase; letter-spacing: 1px; color: rgba(255,255,255,0.35); margin-bottom: 6px;">Peak Day</div>
              <div style="font-size: 26px; font-weight: 700; color: #7fb3ff;">${peakDay.dowName}</div>
              <div style="font-size: 12px; color: rgba(255,255,255,0.4);">$${peakDay.predicted.toLocaleString()} predicted</div>
            </div>
            <div style="background: rgba(255,255,255,0.05); border-radius: 8px; padding: 16px;">
              <div style="font-size: 11px; text-transform: uppercase; letter-spacing: 1px; color: rgba(255,255,255,0.35); margin-bottom: 6px;">Model Accuracy</div>
              <div style="font-size: 26px; font-weight: 700; color: #34d399;">Â±11%</div>
              <div style="font-size: 12px; color: rgba(255,255,255,0.4);">MAPE (backtest)</div>
            </div>
          </div>

          <!-- Revenue Forecast Bars -->
          <div style="background: rgba(255,255,255,0.04); border-radius: 10px; padding: 20px; margin-bottom: 16px;">
            <div style="font-size: 13px; font-weight: 700; color: rgba(255,255,255,0.6); margin-bottom: 16px;">DAILY REVENUE FORECAST</div>
            <div style="display: flex; align-items: flex-end; gap: 10px; height: 140px;">
              ${fc.map((f, i) => {
                const pct = (f.predicted / maxRev) * 100;
                const lowPct = (f.low / maxRev) * 100;
                const isMax = f.predicted === peakDay.predicted;
                return `
                <div style="flex: 1; display: flex; flex-direction: column; align-items: center; height: 100%;">
                  <div style="font-size: 11px; color: rgba(255,255,255,0.5); margin-bottom: 4px;">$${f.predicted.toLocaleString()}</div>
                  <div style="flex: 1; width: 100%; display: flex; flex-direction: column; justify-content: flex-end; position: relative;">
                    <div style="width: 100%; border-radius: 4px 4px 0 0; transition: height 0.4s ease;
                      height: ${pct}%;
                      background: ${isMax ? 'linear-gradient(180deg, #006aff 0%, #0050cc 100%)' : 'linear-gradient(180deg, rgba(0,106,255,0.5) 0%, rgba(0,106,255,0.25) 100%)'};
                      box-shadow: ${isMax ? '0 0 20px rgba(0,106,255,0.3)' : 'none'};
                      position: relative;
                    ">
                      ${isMax ? '<div style="position:absolute;top:-8px;left:50%;transform:translateX(-50);font-size:10px;color:#7fb3ff;">â–² Peak</div>' : ''}
                    </div>
                  </div>
                  <div style="font-size: 12px; font-weight: 600; color: ${isMax ? '#7fb3ff' : 'rgba(255,255,255,0.6)'}; margin-top: 8px;">${f.dowName}</div>
                </div>`;
              }).join('')}
            </div>
            <div style="display:flex; justify-content: space-between; margin-top: 12px; font-size: 11px; color: rgba(255,255,255,0.3);">
              <span>Confidence band: Â±12%</span>
              <span>Based on 26-week history</span>
            </div>
          </div>
          
          <!-- Bottom Row: Staffing + Inventory -->
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
            <!-- Staffing -->
            <div style="background: rgba(255,255,255,0.04); border-radius: 10px; padding: 20px;">
              <div style="font-size: 13px; font-weight: 700; color: rgba(255,255,255,0.6); margin-bottom: 12px;">STAFFING RECOMMENDATIONS</div>
              <div style="font-size: 11px; color: rgba(255,255,255,0.3); margin-bottom: 12px;">Target: 28% labor-to-revenue Â· $16/hr avg</div>
              ${staffingRecs.filter(s => s.delta !== 0).slice(0, 3).map(s => `
                <div style="display: flex; align-items: center; gap: 10px; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.06);">
                  <span style="font-size: 10px; font-weight: 600; padding: 2px 8px; border-radius: 4px;
                    background: ${s.delta > 0 ? 'rgba(251,146,60,0.2)' : 'rgba(52,211,153,0.2)'};
                    color: ${s.delta > 0 ? '#fb923c' : '#34d399'};">
                    ${s.delta > 0 ? 'ADD' : 'OK'}</span>
                  <span style="font-size: 13px; color: rgba(255,255,255,0.7);">
                    ${s.dowName}: ${s.delta > 0 ? `+${s.delta} shift${s.delta > 1 ? 's' : ''} recommended` : 'On track'}
                  </span>
                </div>
              `).join('')}
              <button style="margin-top: 12px; padding: 8px 16px; background: rgba(0,106,255,0.2); color: #7fb3ff; border: none; border-radius: 6px; font-size: 12px; font-weight: 600; cursor: pointer; width: 100%;">
                Open in Square Shifts â†’
              </button>
            </div>
            
            <!-- Inventory -->
            <div style="background: rgba(255,255,255,0.04); border-radius: 10px; padding: 20px;">
              <div style="font-size: 13px; font-weight: 700; color: rgba(255,255,255,0.6); margin-bottom: 12px;">INVENTORY ALERTS</div>
              <div style="font-size: 11px; color: rgba(255,255,255,0.3); margin-bottom: 12px;">Based on current stock Ã— sales velocity</div>
              ${inventoryItems.filter(item => getStockoutDay(item)).map(item => {
                const outDay = getStockoutDay(item);
                const daysLeft = Math.floor(item.stock / item.dailyUse);
                const urgency = daysLeft <= 2 ? 'high' : daysLeft <= 4 ? 'med' : 'low';
                return `
                <div style="display: flex; align-items: center; gap: 10px; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.06);">
                  <span style="font-size: 10px; font-weight: 600; padding: 2px 8px; border-radius: 4px;
                    background: ${urgency === 'high' ? 'rgba(248,113,113,0.2)' : urgency === 'med' ? 'rgba(251,146,60,0.2)' : 'rgba(52,211,153,0.2)'};
                    color: ${urgency === 'high' ? '#f87171' : urgency === 'med' ? '#fb923c' : '#34d399'};">
                    ${urgency === 'high' ? 'LOW' : urgency === 'med' ? 'WATCH' : 'OK'}</span>
                  <div style="flex:1;">
                    <div style="font-size: 13px; color: rgba(255,255,255,0.7);">${item.name}</div>
                    <div style="font-size: 11px; color: rgba(255,255,255,0.3);">${item.stock} ${item.unit} left Â· ~${daysLeft}d supply Â· est. out ${outDay}</div>
                  </div>
                </div>`;
              }).join('')}
            </div>
          </div>
        </div>
      </div>
    `;
  }
  
  window.__setWeek = function(w) {
    currentWeek = w;
    render();
  };
  
  render();
}

renderPrototype();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STICKY NAV
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const sections = document.querySelectorAll('section[id]');
const navLinks = document.querySelectorAll('.toc a');
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      navLinks.forEach(link => link.classList.remove('active'));
      const active = document.querySelector(`.toc a[href="#${entry.target.id}"]`);
      if (active) active.classList.add('active');
    }
  });
}, { rootMargin: '-20% 0px -70% 0px' });
sections.forEach(section => observer.observe(section));
</script>

</body>
</html>
